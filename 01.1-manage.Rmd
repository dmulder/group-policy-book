# Managing Group Policies {#manage}

```{r, echo=FALSE, out.width="30%", fig.align='center'}
knitr::include_graphics("manage-images/admin.png")
```

Before diving into specific Group Policies, let's review the basics of managing Group Policy.

A Windows Active Directory Administrator should know that Group Policies are managed via the Group Policy Management Console (GPMC). Unfortunately there isn't a similar tool for Samba Active Directory Administrators. The Samba project does provide the comprehensive `samba-tool gpo` command, which supplants much of the GPMC.

There are instances where Samba's Group Policy can only be managed via the GPMC, with no `samba-tool gpo` alternative. These cases will be highlighted in the text.

## Creating a Group Policy Object {#gpcreate}

The `samba-tool gpo create` command is used to create a Group Policy Object.
The `samba-tool gpo create` command is used to create a Group Policy Object (GPO). To create a GPO using the `samba-tool gpo create` command, you would use the following syntax:

```sh
samba-tool gpo create GPO_NAME
```

Where `GPO_NAME` is the name of the GPO that you want to create. This name should be unique within the domain, as it will be used to identify the GPO when it is linked to a domain or organizational unit (OU).

Once the GPO has been created, you can use the `samba-tool gpo setlink` command to add or update a GPO link to a container. The syntax for this command is:

```sh
samba-tool gpo setlink CONTAINER_DN GPO_NAME
```

Where `CONTAINER_DN` is the distinguished name of the container from which you want to create the GPO link, and `GPO_NAME` is the name of the GPO you want to link.

## Deleting a Group Policy Object {#gpdelete}

To delete a Group Policy Object (GPO), you would use the `samba-tool gpo del` command. The syntax for this command is:

```sh
samba-tool gpo del GPO_NAME
```

Where `GPO_NAME` is the name of the GPO you want to delete.

This command will delete the GPO from the server. Keep in mind that this operation cannot be undone, so make sure you really want to delete the GPO before running this command.

To delete a Group Policy Object (GPO) link from a container, you would use the `samba-tool gpo dellink` command. The syntax for this command is:

```sh
samba-tool gpo dellink CONTAINER_DN GPO_NAME
```

Where `CONTAINER_DN` is the distinguished name of the container from which you want to delete the GPO link, and `GPO_NAME` is the name of the GPO you want to unlink.

## Listing a Group Policy {#gplist}

To list the contents of a Group Policy Object (GPO), you would use the `samba-tool gpo list` command. The syntax for this command is:

```sh
samba-tool gpo list GPO_NAME
```

Where `GPO_NAME` is the name of the GPO you want to list the contents of.

This command will list all of the settings and policies contained in the specified GPO.

## Modifying a Group Policy {#gpmodify}

The `samba-tool gpo manage` is used for modifying settings on a Group Policy Object. See the individual chapters for each subcommand explanation.

```{r, echo=FALSE}
knitr::kable(
  data.frame(
    "Command" = c(
      "samba-tool gpo manage smb_conf",
      "samba-tool gpo manage security",
      "samba-tool gpo manage scripts startup",
      "samba-tool gpo manage files",
      "samba-tool gpo manage symlink",
      "samba-tool gpo manage sudoers",
      "samba-tool gpo manage issue",
      "samba-tool gpo manage motd",
      "samba-tool gpo manage access",
      "samba-tool gpo manage openssh"
    ),
    "Chapter" = c(
      "\\@ref(smbconf)",
      "\\@ref(sec)",
      "\\@ref(startupscripts)",
      "\\@ref(files)",
      "\\@ref(symlink)",
      "\\@ref(sudoers)",
      "\\@ref(msgs)",
      "\\@ref(msgs)",
      "\\@ref(pamaccess)",
      "\\@ref(openssh)"
    )
  )
)
```

Each of these subcommands has its own set of options and parameters that can be used to specify the details of the operation. For more information on a specific subcommand, you can consult the documentation for that subcommand.
