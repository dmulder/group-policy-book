<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 smb.conf Policies | Group Policy on Linux</title>
  <meta name="description" content="<p>This book introduces the user to opensource tools for managing Linux
clients via Group Policy.</p>" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="5 smb.conf Policies | Group Policy on Linux" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://dmulder.github.io/group-policy-book/cover-image.png" />
  <meta property="og:description" content="<p>This book introduces the user to opensource tools for managing Linux
clients via Group Policy.</p>" />
  <meta name="github-repo" content="dmulder/group-policy-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 smb.conf Policies | Group Policy on Linux" />
  
  <meta name="twitter:description" content="<p>This book introduces the user to opensource tools for managing Linux
clients via Group Policy.</p>" />
  <meta name="twitter:image" content="https://dmulder.github.io/group-policy-book/cover-image.png" />

<meta name="author" content="David Mulder" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manage.html"/>
<link rel="next" href="sec.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i><b>2</b> About the Author</a></li>
<li class="chapter" data-level="3" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>3</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro.html"><a href="intro.html#whats-the-difference-between-group-policy-and-a-group-policy-object"><i class="fa fa-check"></i><b>3.1</b> What’s the difference between Group Policy and a Group Policy Object?</a></li>
<li class="chapter" data-level="3.2" data-path="intro.html"><a href="intro.html#server-side-extensions"><i class="fa fa-check"></i><b>3.2</b> Server Side Extensions</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="intro.html"><a href="intro.html#enabling-group-policy-server-side-extensions-on-the-server"><i class="fa fa-check"></i><b>3.2.1</b> Enabling Group Policy Server Side Extensions on the Server</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="intro.html"><a href="intro.html#client-side-extensions"><i class="fa fa-check"></i><b>3.3</b> Client Side Extensions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="intro.html"><a href="intro.html#enabling-group-policy-client-side-extensions-on-the-linux-client"><i class="fa fa-check"></i><b>3.3.1</b> Enabling Group Policy Client Side Extensions on the Linux Client</a></li>
<li class="chapter" data-level="3.3.2" data-path="intro.html"><a href="intro.html#rsop"><i class="fa fa-check"></i><b>3.3.2</b> Resultant Set of Policy</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#policies-introduced-in-this-book"><i class="fa fa-check"></i><b>3.4</b> Policies Introduced in this Book</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="intro.html"><a href="intro.html#smb.conf-policies"><i class="fa fa-check"></i><b>3.4.1</b> smb.conf Policies</a></li>
<li class="chapter" data-level="3.4.2" data-path="intro.html"><a href="intro.html#password-and-kerberos-policies"><i class="fa fa-check"></i><b>3.4.2</b> Password and Kerberos Policies</a></li>
<li class="chapter" data-level="3.4.3" data-path="intro.html"><a href="intro.html#script-policies"><i class="fa fa-check"></i><b>3.4.3</b> Script Policies</a></li>
<li class="chapter" data-level="3.4.4" data-path="intro.html"><a href="intro.html#startup-script-policies"><i class="fa fa-check"></i><b>3.4.4</b> Startup Script Policies</a></li>
<li class="chapter" data-level="3.4.5" data-path="intro.html"><a href="intro.html#files-policy"><i class="fa fa-check"></i><b>3.4.5</b> Files Policy</a></li>
<li class="chapter" data-level="3.4.6" data-path="intro.html"><a href="intro.html#symlink-policies"><i class="fa fa-check"></i><b>3.4.6</b> Symlink Policies</a></li>
<li class="chapter" data-level="3.4.7" data-path="intro.html"><a href="intro.html#sudoers-policies"><i class="fa fa-check"></i><b>3.4.7</b> Sudoers Policies</a></li>
<li class="chapter" data-level="3.4.8" data-path="intro.html"><a href="intro.html#message-policies"><i class="fa fa-check"></i><b>3.4.8</b> Message Policies</a></li>
<li class="chapter" data-level="3.4.9" data-path="intro.html"><a href="intro.html#pam-access-policies"><i class="fa fa-check"></i><b>3.4.9</b> PAM Access Policies</a></li>
<li class="chapter" data-level="3.4.10" data-path="intro.html"><a href="intro.html#certificate-auto-enrollment"><i class="fa fa-check"></i><b>3.4.10</b> Certificate Auto Enrollment</a></li>
<li class="chapter" data-level="3.4.11" data-path="intro.html"><a href="intro.html#firefox-policy"><i class="fa fa-check"></i><b>3.4.11</b> Firefox Policy</a></li>
<li class="chapter" data-level="3.4.12" data-path="intro.html"><a href="intro.html#chromiumchrome-policy"><i class="fa fa-check"></i><b>3.4.12</b> Chromium/Chrome Policy</a></li>
<li class="chapter" data-level="3.4.13" data-path="intro.html"><a href="intro.html#gnome-settings"><i class="fa fa-check"></i><b>3.4.13</b> GNOME Settings</a></li>
<li class="chapter" data-level="3.4.14" data-path="intro.html"><a href="intro.html#openssh-policy"><i class="fa fa-check"></i><b>3.4.14</b> OpenSSH Policy</a></li>
<li class="chapter" data-level="3.4.15" data-path="intro.html"><a href="intro.html#firewalld-policy"><i class="fa fa-check"></i><b>3.4.15</b> Firewalld Policy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manage.html"><a href="manage.html"><i class="fa fa-check"></i><b>4</b> Managing Group Policies</a>
<ul>
<li class="chapter" data-level="4.1" data-path="manage.html"><a href="manage.html#gpopen"><i class="fa fa-check"></i><b>4.1</b> Opening a Group Policy Object in the Group Policy Management Console</a></li>
<li class="chapter" data-level="4.2" data-path="manage.html"><a href="manage.html#gpcreate"><i class="fa fa-check"></i><b>4.2</b> Creating a Group Policy Object</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="manage.html"><a href="manage.html#samba-tool"><i class="fa fa-check"></i><b>4.2.1</b> samba-tool</a></li>
<li class="chapter" data-level="4.2.2" data-path="manage.html"><a href="manage.html#gpmc"><i class="fa fa-check"></i><b>4.2.2</b> GPMC</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="manage.html"><a href="manage.html#gpdelete"><i class="fa fa-check"></i><b>4.3</b> Deleting a Group Policy Object</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="manage.html"><a href="manage.html#samba-tool-1"><i class="fa fa-check"></i><b>4.3.1</b> samba-tool</a></li>
<li class="chapter" data-level="4.3.2" data-path="manage.html"><a href="manage.html#gpmc-1"><i class="fa fa-check"></i><b>4.3.2</b> GPMC</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="manage.html"><a href="manage.html#gplist"><i class="fa fa-check"></i><b>4.4</b> Listing a Group Policy</a></li>
<li class="chapter" data-level="4.5" data-path="manage.html"><a href="manage.html#gpmodify"><i class="fa fa-check"></i><b>4.5</b> Modifying a Group Policy</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="smbconf.html"><a href="smbconf.html"><i class="fa fa-check"></i><b>5</b> smb.conf Policies</a>
<ul>
<li class="chapter" data-level="5.1" data-path="smbconf.html"><a href="smbconf.html#smbconf-sse"><i class="fa fa-check"></i><b>5.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="smbconf.html"><a href="smbconf.html#managing-smb.conf-policies-via-the-gpme"><i class="fa fa-check"></i><b>5.1.1</b> Managing smb.conf Policies via the GPME</a></li>
<li class="chapter" data-level="5.1.2" data-path="smbconf.html"><a href="smbconf.html#managing-smb.conf-policies-via-samba-tool"><i class="fa fa-check"></i><b>5.1.2</b> Managing smb.conf Policies via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="smbconf.html"><a href="smbconf.html#client-side-extension"><i class="fa fa-check"></i><b>5.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sec.html"><a href="sec.html"><i class="fa fa-check"></i><b>6</b> Password and Kerberos Policies</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sec.html"><a href="sec.html#server-side-extension"><i class="fa fa-check"></i><b>6.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="sec.html"><a href="sec.html#managing-password-and-kerberos-policies-via-the-gpme"><i class="fa fa-check"></i><b>6.1.1</b> Managing Password and Kerberos Policies via the GPME</a></li>
<li class="chapter" data-level="6.1.2" data-path="sec.html"><a href="sec.html#managing-password-and-kerberos-policies-via-samba-tool"><i class="fa fa-check"></i><b>6.1.2</b> Managing Password and Kerberos Policies via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="sec.html"><a href="sec.html#client-side-extension-1"><i class="fa fa-check"></i><b>6.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="scripts.html"><a href="scripts.html"><i class="fa fa-check"></i><b>7</b> Script Policies</a>
<ul>
<li class="chapter" data-level="7.1" data-path="scripts.html"><a href="scripts.html#server-side-extension-1"><i class="fa fa-check"></i><b>7.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="scripts.html"><a href="scripts.html#scripts-gpme"><i class="fa fa-check"></i><b>7.1.1</b> Managing Machine Scripts Policies via the GPME</a></li>
<li class="chapter" data-level="7.1.2" data-path="scripts.html"><a href="scripts.html#managing-user-scripts-policies-via-the-gpme"><i class="fa fa-check"></i><b>7.1.2</b> Managing User Scripts Policies via the GPME</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="scripts.html"><a href="scripts.html#client-side-extension-2"><i class="fa fa-check"></i><b>7.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="startupscripts.html"><a href="startupscripts.html"><i class="fa fa-check"></i><b>8</b> Startup Script Policies</a>
<ul>
<li class="chapter" data-level="8.1" data-path="startupscripts.html"><a href="startupscripts.html#server-side-extension-2"><i class="fa fa-check"></i><b>8.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="startupscripts.html"><a href="startupscripts.html#managing-startup-script-policies-via-samba-tool"><i class="fa fa-check"></i><b>8.1.1</b> Managing Startup Script Policies via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="startupscripts.html"><a href="startupscripts.html#client-side-extension-3"><i class="fa fa-check"></i><b>8.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>9</b> Files Policy</a>
<ul>
<li class="chapter" data-level="9.1" data-path="files.html"><a href="files.html#server-side-extension-3"><i class="fa fa-check"></i><b>9.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="files.html"><a href="files.html#managing-the-files-policy-via-samba-tool"><i class="fa fa-check"></i><b>9.1.1</b> Managing the Files Policy via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="files.html"><a href="files.html#client-side-extension-4"><i class="fa fa-check"></i><b>9.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="symlink.html"><a href="symlink.html"><i class="fa fa-check"></i><b>10</b> Symlink Policies</a>
<ul>
<li class="chapter" data-level="10.1" data-path="symlink.html"><a href="symlink.html#server-side-extension-4"><i class="fa fa-check"></i><b>10.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="symlink.html"><a href="symlink.html#managing-the-symlink-policy-via-samba-tool"><i class="fa fa-check"></i><b>10.1.1</b> Managing the Symlink Policy via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="symlink.html"><a href="symlink.html#client-side-extension-5"><i class="fa fa-check"></i><b>10.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sudoers.html"><a href="sudoers.html"><i class="fa fa-check"></i><b>11</b> Sudoers Policies</a>
<ul>
<li class="chapter" data-level="11.1" data-path="sudoers.html"><a href="sudoers.html#server-side-extension-5"><i class="fa fa-check"></i><b>11.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="sudoers.html"><a href="sudoers.html#sudoers-gpme"><i class="fa fa-check"></i><b>11.1.1</b> Managing Sudoers Policy via the GPME</a></li>
<li class="chapter" data-level="11.1.2" data-path="sudoers.html"><a href="sudoers.html#sudoers-samba-tool"><i class="fa fa-check"></i><b>11.1.2</b> Managing Sudoers Policy via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="sudoers.html"><a href="sudoers.html#client-side-extension-6"><i class="fa fa-check"></i><b>11.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="msgs.html"><a href="msgs.html"><i class="fa fa-check"></i><b>12</b> Message Policies</a>
<ul>
<li class="chapter" data-level="12.1" data-path="msgs.html"><a href="msgs.html#server-side-extension-6"><i class="fa fa-check"></i><b>12.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="msgs.html"><a href="msgs.html#msgs-gpme"><i class="fa fa-check"></i><b>12.1.1</b> Managing Message Policy via the GPME</a></li>
<li class="chapter" data-level="12.1.2" data-path="msgs.html"><a href="msgs.html#msgs-samba-tool"><i class="fa fa-check"></i><b>12.1.2</b> Managing Message Policy via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="msgs.html"><a href="msgs.html#client-side-extension-7"><i class="fa fa-check"></i><b>12.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="pamaccess.html"><a href="pamaccess.html"><i class="fa fa-check"></i><b>13</b> PAM Access Policies</a>
<ul>
<li class="chapter" data-level="13.1" data-path="pamaccess.html"><a href="pamaccess.html#server-side-extension-7"><i class="fa fa-check"></i><b>13.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="pamaccess.html"><a href="pamaccess.html#managing-pam-access-policies-via-samba-tool"><i class="fa fa-check"></i><b>13.1.1</b> Managing PAM Access Policies via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="pamaccess.html"><a href="pamaccess.html#client-side-extension-8"><i class="fa fa-check"></i><b>13.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="certautoenroll.html"><a href="certautoenroll.html"><i class="fa fa-check"></i><b>14</b> Certificate Auto Enrollment Policy</a>
<ul>
<li class="chapter" data-level="14.1" data-path="certautoenroll.html"><a href="certautoenroll.html#server-side-extension-8"><i class="fa fa-check"></i><b>14.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="certautoenroll.html"><a href="certautoenroll.html#managing-certificate-auto-enrollment-via-the-gpme"><i class="fa fa-check"></i><b>14.1.1</b> Managing Certificate Auto Enrollment via the GPME</a></li>
<li class="chapter" data-level="14.1.2" data-path="certautoenroll.html"><a href="certautoenroll.html#certificate-templates"><i class="fa fa-check"></i><b>14.1.2</b> Certificate Templates</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="certautoenroll.html"><a href="certautoenroll.html#client-side-extension-9"><i class="fa fa-check"></i><b>14.2</b> Client Side Extension</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="certautoenroll.html"><a href="certautoenroll.html#trouble-shooting-certificates"><i class="fa fa-check"></i><b>14.2.1</b> Trouble Shooting Certificates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="firefox.html"><a href="firefox.html"><i class="fa fa-check"></i><b>15</b> Firefox Policy</a>
<ul>
<li class="chapter" data-level="15.1" data-path="firefox.html"><a href="firefox.html#server-side-extension-9"><i class="fa fa-check"></i><b>15.1</b> Server Side Extension</a></li>
<li class="chapter" data-level="15.2" data-path="firefox.html"><a href="firefox.html#managing-firefox-policy-via-the-gpme"><i class="fa fa-check"></i><b>15.2</b> Managing Firefox Policy via the GPME</a></li>
<li class="chapter" data-level="15.3" data-path="firefox.html"><a href="firefox.html#client-side-extension-10"><i class="fa fa-check"></i><b>15.3</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="chrome.html"><a href="chrome.html"><i class="fa fa-check"></i><b>16</b> Chromium/Chrome Policy</a>
<ul>
<li class="chapter" data-level="16.1" data-path="chrome.html"><a href="chrome.html#server-side-extension-10"><i class="fa fa-check"></i><b>16.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="chrome.html"><a href="chrome.html#managing-chromium-policy-via-the-gpme"><i class="fa fa-check"></i><b>16.1.1</b> Managing Chromium Policy via the GPME</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="chrome.html"><a href="chrome.html#client-side-extension-11"><i class="fa fa-check"></i><b>16.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="gnome.html"><a href="gnome.html"><i class="fa fa-check"></i><b>17</b> GNOME Settings Policy</a>
<ul>
<li class="chapter" data-level="17.1" data-path="gnome.html"><a href="gnome.html#server-side-extension-11"><i class="fa fa-check"></i><b>17.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="gnome.html"><a href="gnome.html#managing-gnome-settings-policy-via-the-gpme"><i class="fa fa-check"></i><b>17.1.1</b> Managing GNOME Settings Policy via the GPME</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="gnome.html"><a href="gnome.html#client-side-extension-12"><i class="fa fa-check"></i><b>17.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="openssh.html"><a href="openssh.html"><i class="fa fa-check"></i><b>18</b> OpenSSH Policy</a>
<ul>
<li class="chapter" data-level="18.1" data-path="openssh.html"><a href="openssh.html#server-side-extension-12"><i class="fa fa-check"></i><b>18.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="openssh.html"><a href="openssh.html#managing-openssh-policy-via-samba-tool"><i class="fa fa-check"></i><b>18.1.1</b> Managing OpenSSH Policy via samba-tool</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="openssh.html"><a href="openssh.html#client-side-extension-13"><i class="fa fa-check"></i><b>18.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="firewalld.html"><a href="firewalld.html"><i class="fa fa-check"></i><b>19</b> Firewalld Policy</a>
<ul>
<li class="chapter" data-level="19.1" data-path="firewalld.html"><a href="firewalld.html#server-side-extension-13"><i class="fa fa-check"></i><b>19.1</b> Server Side Extension</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="firewalld.html"><a href="firewalld.html#managing-firewalld-policy-via-the-gpme"><i class="fa fa-check"></i><b>19.1.1</b> Managing Firewalld Policy via the GPME</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="firewalld.html"><a href="firewalld.html#client-side-extension-14"><i class="fa fa-check"></i><b>19.2</b> Client Side Extension</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html"><i class="fa fa-check"></i><b>20</b> Writing Group Policy Extensions</a>
<ul>
<li class="chapter" data-level="20.1" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#sse"><i class="fa fa-check"></i><b>20.1</b> Creating the Server Side Extension</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#admx"><i class="fa fa-check"></i><b>20.1.1</b> Administrative Templates</a></li>
<li class="chapter" data-level="20.1.2" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#samba-tool-gpo-manage"><i class="fa fa-check"></i><b>20.1.2</b> samba-tool gpo manage</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#cse"><i class="fa fa-check"></i><b>20.2</b> Creating the Client Side Extension</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#the-gp_ext-and-gp_applier-python-classes"><i class="fa fa-check"></i><b>20.2.1</b> The gp_ext and gp_applier Python Classes</a></li>
<li class="chapter" data-level="20.2.2" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#process-group-policy"><i class="fa fa-check"></i><b>20.2.2</b> Process Group Policy</a></li>
<li class="chapter" data-level="20.2.3" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#resultant-set-of-policy"><i class="fa fa-check"></i><b>20.2.3</b> Resultant Set of Policy</a></li>
<li class="chapter" data-level="20.2.4" data-path="writing-group-policy-extensions.html"><a href="writing-group-policy-extensions.html#registeringunregistering-a-client-side-extension"><i class="fa fa-check"></i><b>20.2.4</b> Registering/Unregistering a Client Side Extension</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="regpol.html"><a href="regpol.html"><i class="fa fa-check"></i><b>21</b> Modifying a Registry.pol File</a>
<ul>
<li class="chapter" data-level="21.1" data-path="regpol.html"><a href="regpol.html#regpol-samba-tool"><i class="fa fa-check"></i><b>21.1</b> Using samba-tool</a></li>
<li class="chapter" data-level="21.2" data-path="regpol.html"><a href="regpol.html#scripting-with-python"><i class="fa fa-check"></i><b>21.2</b> Scripting with python</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="install-admx.html"><a href="install-admx.html"><i class="fa fa-check"></i><b>22</b> Installing Administrative Templates</a>
<ul>
<li class="chapter" data-level="22.1" data-path="install-admx.html"><a href="install-admx.html#install-admx-samba"><i class="fa fa-check"></i><b>22.1</b> Install Samba ADMX Templates</a></li>
<li class="chapter" data-level="22.2" data-path="install-admx.html"><a href="install-admx.html#install-admx-firefox"><i class="fa fa-check"></i><b>22.2</b> Installing Firefox ADMX Templates</a></li>
<li class="chapter" data-level="22.3" data-path="install-admx.html"><a href="install-admx.html#install-admx-chromium"><i class="fa fa-check"></i><b>22.3</b> Installing Chromium ADMX Templates</a></li>
<li class="chapter" data-level="22.4" data-path="install-admx.html"><a href="install-admx.html#install-admx-windows"><i class="fa fa-check"></i><b>22.4</b> Installing Windows ADMX Templates</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="policy-refresh.html"><a href="policy-refresh.html"><i class="fa fa-check"></i><b>23</b> Automatic Policy Refresh</a>
<ul>
<li class="chapter" data-level="23.1" data-path="policy-refresh.html"><a href="policy-refresh.html#samba-gpupdate"><i class="fa fa-check"></i><b>23.1</b> The samba-gpupdate command</a></li>
<li class="chapter" data-level="23.2" data-path="policy-refresh.html"><a href="policy-refresh.html#winbind-refresh"><i class="fa fa-check"></i><b>23.2</b> Automatic Policy Refresh via winbind</a></li>
<li class="chapter" data-level="23.3" data-path="policy-refresh.html"><a href="policy-refresh.html#sssd-refresh"><i class="fa fa-check"></i><b>23.3</b> Automatic Policy Refresh via oddjob-gpupdate</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Group Policy on Linux</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="smbconf" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> smb.conf Policies<a href="smbconf.html#smbconf" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="smb-conf-images/smbconf.png" width="30%" style="display: block; margin: auto;" /></p>
<p></p>
<p>The purpose of the smb.conf policies is to be able to distribute smb.conf settings to Linux clients. This policy only supports a physical smb.conf file, and currently does not support smb.conf registry settings.</p>
<p>These policies are physically stored on the SYSVOL in the <strong>MACHINE/Registry.pol</strong> file in the subdirectory of the Group Policy Object. They are stored in registry format, and are difficult to modify manually. See chapter <a href="regpol.html#regpol">21</a> for details on how to manually modify this file.</p>
<div id="smbconf-sse" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Server Side Extension<a href="smbconf.html#smbconf-sse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Server Side Extension for smb.conf policies is distributed using Administrative Templates (ADMX). Refer to chapter <a href="writing-group-policy-extensions.html#sse">20.1</a> in section <a href="writing-group-policy-extensions.html#admx">20.1.1</a> for details about Administrative Templates.</p>
<p>Setting up the ADMX templates for this policy is described in chapter <a href="install-admx.html#install-admx">22</a> section <a href="install-admx.html#install-admx-samba">22.1</a>.
</p>
<div id="managing-smb.conf-policies-via-the-gpme" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Managing smb.conf Policies via the GPME<a href="smbconf.html#managing-smb.conf-policies-via-the-gpme" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After successfully installing the ADMX templates, open the Group Policy Management Editor (GPME). For instructions on accessing the GPME, see chapter <a href="manage.html#manage">4</a> section <a href="manage.html#gpopen">4.1</a>. For this example, we’re going to enable the <code>apply group policies</code> setting.</p>
<ol style="list-style-type: decimal">
<li>In the left pane of the GPME, navigate to <code>Computer Configuration &gt; Policies &gt; Administrative Templates &gt; Samba &gt; smb.conf</code>.</li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-10"></span>
<img src="smb-conf-images/gpme.png" alt="smb.conf Server Side Extension (ADMX)" width="70%" />
<p class="caption">
Figure 5.1: smb.conf Server Side Extension (ADMX)
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li><p>In the right pane, double-click the “apply group policies” policy.</p></li>
<li><p>In the “apply group policies” dialog box, click the Enabled option.</p></li>
<li><p>Check the box next to “apply group policies”.</p></li>
<li><p>Click OK to close the “Apply group policies” dialog box.</p></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11"></span>
<img src="smb-conf-images/setting.png" alt="apply group policies Setting" width="70%" />
<p class="caption">
Figure 5.2: apply group policies Setting
</p>
</div>
<div id="info" style="color: green;">
<p>Note: The <code>apply group policies</code> setting instructs Winbind to execute the <code>samba-gpupdate</code> command on the Group Policy interval (every 90 to 120 minutes). This allows you to apply Group Policy updates to Samba clients without having to log off and log back on.</p>
</div>
<p>
</p>
<p>There are many other settings available here, but notice that idmap policies are not. That’s because idmap policies modify the setting name (not just the value), so these couldn’t be included.</p>
</div>
<div id="managing-smb.conf-policies-via-samba-tool" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Managing smb.conf Policies via samba-tool<a href="smbconf.html#managing-smb.conf-policies-via-samba-tool" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Setting an smb.conf Group Policy via <code>samba-tool gpo manage smb_conf</code> is arguably much simpler.</p>
<p>Use the <code>samba-tool gpo manage smb_conf set</code> command, providing the following arguments:</p>
<ol style="list-style-type: decimal">
<li><p><code>&lt;gpo&gt;</code>: The name of the GPO that you want to modify.</p></li>
<li><p><code>&lt;setting&gt;</code>: The name of the smb.conf setting that you want to set.</p></li>
<li><p><code>&lt;value&gt;</code>: The value that you want to set for the specified setting.</p></li>
</ol>
<p>For example, to set the <code>apply gpo policies</code> setting to <code>yes</code> in the GPO named <code>{31B2F340-016D-11D2-945F-00C04FB984F9}</code>, you would use the following command:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="smbconf.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">samba-tool</span> gpo manage smb_conf set <span class="dt">\</span></span>
<span id="cb8-2"><a href="smbconf.html#cb8-2" aria-hidden="true" tabindex="-1"></a>    {31B2F340-016D-11D2-945F-00C04FB984F9} <span class="st">&#39;apply gpo policies&#39;</span> yes</span></code></pre></div>
<p>If you want to unset a policy, you can omit the <code>&lt;value&gt;</code> argument. For example, to unset the <code>apply gpo policies</code> setting in the GPO named <code>{31B2F340-016D-11D2-945F-00C04FB984F9}</code>, you would use the following command:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="smbconf.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">samba-tool</span> gpo manage smb_conf set <span class="dt">\</span></span>
<span id="cb9-2"><a href="smbconf.html#cb9-2" aria-hidden="true" tabindex="-1"></a>    {31B2F340-016D-11D2-945F-00C04FB984F9} <span class="st">&#39;apply gpo policies&#39;</span></span></code></pre></div>
<p>This command does not require the ADMX templates to be installed, and also does not suffer from the same limitation as the GPME for idmap policies.</p>
</div>
</div>
<div id="client-side-extension" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Client Side Extension<a href="smbconf.html#client-side-extension" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The smb.conf Client Side Extension (CSE) directly modifies the default smb.conf file. Any custom formatting or comments in the smb.conf file may be overwritten. The CSE will open your existing smb.conf file, read in the current settings, set the settings provided by the GPO, then write the file back to disk. This CSE will only write <code>global</code> smb.conf options.
</p>
<p>In the previous section, we enabled the <code>apply group policies</code> smb.conf option. If we now go to our Linux client, and check the Resultant Set of Policy, we see this:</p>
<pre><code>&gt; sudo /usr/sbin/samba-gpupdate --rsop
Resultant Set of Policy
Computer Policy

GPO: Default Domain Policy
=================================================================
  CSE: gp_smb_conf_ext
  -----------------------------------------------------------
    Policy Type: smb.conf
    -----------------------------------------------------------
    [ apply group policies ] = 1
    -----------------------------------------------------------
  -----------------------------------------------------------
=================================================================</code></pre>
<p></p>
<p>If we now force the policy, we’ll see our setting gets applied to the default smb.conf:</p>
<pre><code>&gt; sudo /usr/sbin/samba-gpupdate --force
&gt; diff -u /etc/samba/smb.conf.BAK /etc/samba/smb.conf
--- /etc/samba/smb.conf.BAK
+++ /etc/samba/smb.conf
@@ -1,5 +1,6 @@
 # Global parameters
 [global]
+   apply group policies = Yes
    kerberos method = secrets and keytab
    logon drive = P:
    logon home = \\%L\%U\.9xprofile</code></pre>
<p>If for whatever reason the policy did not apply, it is sometimes helpful to look at the Group Policy Cache, which keeps track of applied policies.
</p>
<pre><code>&gt; sudo tdbdump /var/lib/samba/gpo.tdb -k &quot;TESTSYSDM$&quot; \
| sed -r &quot;s/\\\22/\&quot;/g&quot; | sed -r &quot;s/\\\5C/\\\\/g&quot; \
| xmllint --xpath &quot;//gp_ext[@name=&#39;smb.conf&#39;]&quot; - \
| xmllint --format -
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;gp_ext name=&quot;smb.conf&quot;&gt;
  &lt;attribute name=&quot;apply group policies&quot;&gt;yes&lt;/attribute&gt;
&lt;/gp_ext&gt;</code></pre>
<p>Where <strong>TESTSYSDM$</strong> is the system name. You can see in our case Samba has recorded applying the Group Policy Object, and that it set <code>apply group policies = yes</code> in our smb.conf.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="manage.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sec.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
